const translations = {
    en: {
        "title": "Domain Radar - Login",
        "heading": "ðŸ“¡ Domain Radar",
        "subheading": "Your insight into domain trends.",
        "welcome": "Welcome Back",
        "username_label": "Username",
        "username_placeholder": "Enter your username",
        "password_label": "Password",
        "password_placeholder": "Enter your password",
        "login_btn": "Login",
        "register_btn": "Register",
        "footer": "Â© 2024 Domain Radar. All rights reserved.",
        "msg_enter_both": "Please enter both username and password",
        "msg_login_failed": "Login failed",
        "msg_register_success": "Registered successfully! You can now login.",
        "msg_register_failed": "Register failed",
        "msg_network_error": "Network error",
        "dash_title": "Domain Radar - Dashboard",
        "nav_brand": "ðŸ“¡ Domain Radar",
        "logout": "Logout",
        "reports_title": "Reports Dashboard",
        "refresh_btn": "Refresh",
        "loading": "Loading reports...",
        "no_reports": "No reports found.",
        "failed_load": "Failed to load reports.",
        "report_contains": "Contains {count} domains",
        "view_details": "View Details â†’",
        "report_page_title": "Domain Radar | Report Details",
        "loading_report": "Loading report details...",
        "no_id": "No report ID specified",
        "load_error": "Failed to load report",
        "report_header": "ðŸ“¡ Domain Radar Daily Report",
        "deep_analysis_title": "ðŸ§  Global Deep Analysis",
        "macro_trends": "ðŸ” Macro Trends",
        "opportunities": "ðŸš€ Opportunities",
        "risks": "ðŸ›¡ï¸ Risks",
        "action_guides": "ðŸ’¡ Action Guides",
        "domain_overview": "ðŸ“ Overview",
        "domain_trends": "ðŸ“ˆ Trends",
        "key_events": "ðŸ”¥ Key Events",
        "references": "ðŸ”— References",
        "heat_score": "Heat: {score}/10",
        "switch_lang": "ä¸­æ–‡",
        "date_cover": "{date} â€¢ Covering {count} domains"
    },
    zh: {
        "title": "é¢†åŸŸé›·è¾¾ - ç™»å½•",
        "heading": "ðŸ“¡ é¢†åŸŸé›·è¾¾",
        "subheading": "æ´žå¯Ÿé¢†åŸŸè¶‹åŠ¿ï¼ŒæŠŠæ¡æœªæ¥å…ˆæœºã€‚",
        "welcome": "æ¬¢è¿Žå›žæ¥",
        "username_label": "ç”¨æˆ·å",
        "username_placeholder": "è¯·è¾“å…¥ç”¨æˆ·å",
        "password_label": "å¯†ç ",
        "password_placeholder": "è¯·è¾“å…¥å¯†ç ",
        "login_btn": "ç™»å½•",
        "register_btn": "æ³¨å†Œ",
        "footer": "Â© 2024 é¢†åŸŸé›·è¾¾. ä¿ç•™æ‰€æœ‰æƒåˆ©.",
        "msg_enter_both": "è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ",
        "msg_login_failed": "ç™»å½•å¤±è´¥",
        "msg_register_success": "æ³¨å†ŒæˆåŠŸï¼çŽ°åœ¨å¯ä»¥ç™»å½•äº†ã€‚",
        "msg_register_failed": "æ³¨å†Œå¤±è´¥",
        "msg_network_error": "ç½‘ç»œé”™è¯¯",
        "dash_title": "é¢†åŸŸé›·è¾¾ - ä»ªè¡¨ç›˜",
        "nav_brand": "ðŸ“¡ é¢†åŸŸé›·è¾¾",
        "logout": "é€€å‡ºç™»å½•",
        "reports_title": "æŠ¥è¡¨ä»ªè¡¨ç›˜",
        "refresh_btn": "åˆ·æ–°",
        "loading": "æ­£åœ¨åŠ è½½æŠ¥è¡¨...",
        "no_reports": "æš‚æ— æŠ¥è¡¨ã€‚",
        "failed_load": "åŠ è½½æŠ¥è¡¨å¤±è´¥ã€‚",
        "report_contains": "åŒ…å« {count} ä¸ªé¢†åŸŸ",
        "view_details": "æŸ¥çœ‹è¯¦æƒ… â†’",
        "report_page_title": "é¢†åŸŸé›·è¾¾ | æŠ¥è¡¨è¯¦æƒ…",
        "loading_report": "æ­£åœ¨åŠ è½½æŠ¥è¡¨è¯¦æƒ…...",
        "no_id": "æœªæŒ‡å®šæŠ¥è¡¨ ID",
        "load_error": "åŠ è½½æŠ¥è¡¨å¤±è´¥",
        "report_header": "ðŸ“¡ é¢†åŸŸé›·è¾¾æ—¥æŠ¥",
        "deep_analysis_title": "ðŸ§  å…¨å±€æ·±åº¦è§£è¯»",
        "macro_trends": "ðŸ” å®è§‚è¶‹åŠ¿",
        "opportunities": "ðŸš€ æœºé‡",
        "risks": "ðŸ›¡ï¸ é£Žé™©",
        "action_guides": "ðŸ’¡ è¡ŒåŠ¨æŒ‡å—",
        "domain_overview": "ðŸ“ ç»¼è¿°",
        "domain_trends": "ðŸ“ˆ è¶‹åŠ¿",
        "key_events": "ðŸ”¥ å…³é”®äº‹ä»¶",
        "references": "ðŸ”— å‚è€ƒæ¥æº",
        "heat_score": "çƒ­åº¦: {score}/10",
        "switch_lang": "English",
        "date_cover": "{date} â€¢ è¦†ç›– {count} ä¸ªé¢†åŸŸ"
    }
};

let currentLang = localStorage.getItem('lang') || 'zh'; // Default to Chinese as per user locale hint, or user preference

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('lang', lang);
    updatePage();
}

function toggleLanguage() {
    setLanguage(currentLang === 'en' ? 'zh' : 'en');
}

function t(key, params = {}) {
    let val = (translations[currentLang] && translations[currentLang][key]) || (translations['en'][key]) || key;
    for (const k in params) {
        val = val.replace(`{${k}}`, params[k]);
    }
    return val;
}

function updatePage() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (el.tagName === 'INPUT' && el.placeholder) {
             el.placeholder = t(key);
        } else {
             el.innerText = t(key);
        }
    });
    
    // Update language switcher button text if exists
    const switcher = document.getElementById('lang-switcher');
    if (switcher) {
        switcher.innerText = t('switch_lang');
    }

    // Update HTML lang attribute
    document.documentElement.lang = currentLang == 'zh' ? 'zh-CN' : 'en';
}

// Expose functions globally
window.t = t;
window.setLanguage = setLanguage;
window.toggleLanguage = toggleLanguage;
window.updatePage = updatePage;
window.currentLang = currentLang;

document.addEventListener('DOMContentLoaded', updatePage);
